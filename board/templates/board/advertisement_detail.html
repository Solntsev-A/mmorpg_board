{% extends "base.html" %}

{% block title %}{{ advertisement.title }}{% endblock %}

{% block content %}
<div class="card">
    <div class="card-body">
        <h1 class="card-title">{{ advertisement.title }}</h1>

        <p class="text-muted">
            Категория: {{ advertisement.category.name }} |
            Автор: {{ advertisement.author.email }}
        </p>

        <hr>

        <div class="card-text">
            {{ advertisement.text|linebreaks }}
        </div>
    </div>
</div>
<div class="mt-5">
    <h4>Отклики</h4>

    {% if responses %}
        <ul class="list-group">
            {% for response in responses %}
                <li class="list-group-item">
                    <p class="mb-1">
                        <strong>{{ response.author.email }}</strong>
                    </p>

                    <p>{{ response.text|linebreaks }}</p>

                    {% if response.is_accepted %}
                        <span class="badge bg-success">Принят</span>
                    {% endif %}

                    {% if user == advertisement.author and not response.is_accepted %}
                        <form method="post"
                              action="{% url 'board:accept_response' response.pk %}">
                            {% csrf_token %}
                            <button class="btn btn-sm btn-outline-success mt-2">
                                Принять отклик
                            </button>
                        </form>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-muted">Откликов пока нет.</p>
    {% endif %}
</div>
{% endblock %}
